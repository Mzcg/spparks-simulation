# SPK library multiple-machine Makefile

SHELL = /bin/sh

# Definitions

ROOT =	spk
EXE =	lib$(ROOT)_$@.a

SRC =	app.cpp app_chemistry.cpp app_custom.cpp app_ising.cpp app_ising_2d_4n.cpp app_ising_2d_8n.cpp app_ising_3d_26n.cpp app_ising_3d_6n.cpp app_lattice.cpp app_lattice2d.cpp app_lattice3d.cpp app_membrane.cpp app_membrane_2d.cpp app_potts.cpp app_potts_2d.cpp app_potts_2d_24n.cpp app_potts_2d_4n.cpp app_potts_2d_8n.cpp app_potts_3d.cpp app_potts_3d_12n.cpp app_potts_3d_26n.cpp app_potts_3d_6n.cpp app_potts_variable.cpp app_surf.cpp app_surf2.cpp app_test2_group.cpp app_test_group.cpp cluster.cpp comm_lattice.cpp comm_lattice2d.cpp comm_lattice3d.cpp const_node.cpp dbl_var_node.cpp diag.cpp diag_cluster.cpp diag_cluster2d.cpp diag_cluster3d.cpp diag_energy.cpp diag_energy2d.cpp diag_energy3d.cpp diag_eprof3d.cpp divide_node.cpp error.cpp event.cpp expression.cpp finish.cpp flip_event.cpp groups.cpp groups2.cpp input.cpp int_var_node.cpp library.cpp memory.cpp minus_node.cpp neighborhood.cpp node.cpp output.cpp plus_node.cpp pow_node.cpp random_fiblag.cpp random_park.cpp random_ranecu.cpp shell.cpp solve.cpp solve_alias.cpp solve_group.cpp solve_group2.cpp solve_linear.cpp solve_tree.cpp spparks.cpp state.cpp swap_event.cpp sweep.cpp sweep_lattice.cpp sweep_lattice2d.cpp sweep_lattice3d.cpp timer.cpp times_node.cpp tree.cpp universe.cpp var_node.cpp variable.cpp

INC =	app.h app_chemistry.h app_custom.h app_ising.h app_ising_2d_4n.h app_ising_2d_8n.h app_ising_3d_26n.h app_ising_3d_6n.h app_lattice.h app_lattice2d.h app_lattice3d.h app_membrane.h app_membrane_2d.h app_potts.h app_potts_2d.h app_potts_2d_24n.h app_potts_2d_4n.h app_potts_2d_8n.h app_potts_3d.h app_potts_3d_12n.h app_potts_3d_26n.h app_potts_3d_6n.h app_potts_variable.h app_surf.h app_surf2.h app_test2_group.h app_test_group.h cluster.h comm_lattice.h comm_lattice2d.h comm_lattice3d.h const_node.h dbl_var_node.h diag.h diag_cluster.h diag_cluster2d.h diag_cluster3d.h diag_energy.h diag_energy2d.h diag_energy3d.h diag_eprof3d.h divide_node.h error.h event.h expression.h finish.h flip_event.h groups.h groups2.h input.h int_var_node.h library.h memory.h minus_node.h neighborhood.h node.h output.h plus_node.h pow_node.h random_fiblag.h random_park.h random_ranecu.h shell.h solve.h solve_alias.h solve_group.h solve_group2.h solve_linear.h solve_tree.h spparks.h state.h style.h style_gppt.h style_user.h swap_event.h sweep.h sweep_lattice.h sweep_lattice2d.h sweep_lattice3d.h sysptr.h timer.h times_node.h tree.h universe.h var_node.h variable.h

OBJ = 	$(SRC:.cpp=.o)

# Targets

help:
	@echo 'Type "make target" where target is one of:'
	@echo ''
	@files="`ls MAKE/Makefile.*`"; \
	for file in $$files; do head -1 $$file; done

clean:
	rm -r Obj_*

.DEFAULT:
	@test -f MAKE/Makefile.$@
	@if [ ! -d Obj_$@ ]; then mkdir Obj_$@; fi
	@cp -p $(SRC) $(INC) Obj_$@
	@cp MAKE/Makefile.$@ Obj_$@/Makefile
	@cd Obj_$@; \
	$(MAKE)  "OBJ = $(OBJ)" "INC = $(INC)" "EXE = ../$(EXE)" lib
	@if [ -d Obj_$@ ]; then cd Obj_$@; rm $(SRC) $(INC) Makefile*; fi
